<div class="d-flex align-items-center p-3">
  <span class="page-title">注文情報確認</span>
</div>

<div class="col row mx-0">
  <div class="col-7 p-0">
    <table class="table">
      <thed>
        <tr>
          <th>商品名</th>
          <th>単価</th>
          <th>数量</th>
          <th>小計</th>
        </tr>
      </thed>
      <tbody>
        <% current_customer.cart_items.each do |cart_item| %>
          <tr>
            <td class="d-flex align-items-center">
              <span class="ml-2"><%= cart_item.item.name %></span>
            </td>
            <td><%= cart_item.item.with_tax_price.to_s(:delimited) %>円</td>
            <td><%= cart_item.amount %></td>
            <td><%= cart_item.subtotal.to_s(:delimited) %>円</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div class="col-4 ml-auto mt-auto mb-3 py-3 bg-white">
    <div class="row">
      <div class="col"><strong>商品合計</strong></div>
      <div class="col text-right"><%= @order.total_payment.to_s(:delimited) %>円</div>
    </div>
    <div class="row mt-2">
      <div class="col"><strong>送料</strong></div>
      <div class="col text-right"><%= @order.shipping_cost.to_s(:delimited) %>円</div>
    </div>
    <div class="row mt-2 border border-top border-secondary">
    </div>
    <div class="row mt-2">
      <div class="col"><strong class="text-danger">請求金額合計</strong></div>
      <div class="col text-right"><strong><%= @order.total_payment.to_s(:delimited) %>円</strong></div>
    </div>
  </div>
</div>

<div class="d-flex align-items-center mt-3">
  <div class="col-2"><strong>支払い方法</strong></div>
  <div><%= @order.payment_method_i18n %></div>
</div>
<div class="d-flex align-items-center mt-2">
  <div class="col-2"><strong>お届け先</strong></div>
  <div>
    <div><%= @order.postal_display %></div>
    <div><%= @order.address %></div>
    <div><%= @order.name %></div>
  </div>
</div>

<div class="mt-5 d-flex justify-content-center">
  <%= form_with model: @order, url: thanks_path, method: :get, local: true do |f| %>
  <%= f.hidden_field :postal_code, value: @order.postal_code %>
  <%= f.hidden_field :address, value: @order.address %>
  <%= f.hidden_field :name, value: @order.name %>
  <%= f.hidden_field :shipping_cost, value: @order.shipping_cost %>
  <%= f.hidden_field :total_payment, value: @order.total_payment %>
  <%= f.hidden_field :payment_method, value: @order.payment_method %>
  <%= f.hidden_field :status, value: @order.status %>
  <%= f.submit "注文を確定する", class: "btn btn-sm btn-success" %>
  <% end %>
</div>
